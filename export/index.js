"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var CustomEventRegisterManager=function(){function CustomEventRegisterManager(){var debug=0<arguments.length&&void 0!==arguments[0]&&arguments[0];_classCallCheck(this,CustomEventRegisterManager),this._listeners=new Map,this.debug=debug,this._eventListenerCounter=0}return _createClass(CustomEventRegisterManager,[{key:"setDebugMode",value:function(){this.debug=!0}},{key:"listAll",value:function(){return new Map(this._listeners)}},{key:"getListenerDetailsByType",value:function(type){return this._listeners.get(type)}},{key:"getListenerDetailsById",value:function(id){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this._listeners.values()[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var listenersDetails=_step.value,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _iterator2=listenersDetails[Symbol.iterator]();!(_iteratorNormalCompletion2=(detail=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var detail=detail.value;if(detail._id===id)return detail}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}console.warn("No associated listener for the id: "+id)}},{key:"addEventListener",value:function(type,listener,options,details,currentListenerDetailsForType){var target=0<arguments.length&&void 0!==type?type:window,type=listener,listener=options,options=3<arguments.length&&void 0!==details?details:{},details=[{_id:currentListenerDetailsForType||this._eventListenerCounter,target:target,type:type,listener:listener,options:options}];this._listeners.size&&(currentListenerDetailsForType=this.getListenerDetailsByType(type),Array.isArray(currentListenerDetailsForType)&&currentListenerDetailsForType.length&&(details=[].concat(_toConsumableArray(details),_toConsumableArray(currentListenerDetailsForType)))),this._listeners.set(type,details),this._eventListenerCounter=++this._eventListenerCounter,target.addEventListener(type,listener,options),this.debug&&console.debug("The event listener for the type: "+type+" has been added for the target:",target)}},{key:"removeEventListenersByType",value:function(type,argument_1){if(!(!(1<arguments.length&&void 0!==argument_1)||argument_1)||this._listeners.size){var currentListenerDetailsForType=this.getListenerDetailsByType(type);if(Array.isArray(currentListenerDetailsForType)&&currentListenerDetailsForType.length){var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _iterator3=currentListenerDetailsForType[Symbol.iterator]();!(_iteratorNormalCompletion3=(listener=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var options=listener.value,target=options.target,listener=options.listener,options=options.options;target.removeEventListener(type,listener,options)}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{!_iteratorNormalCompletion3&&_iterator3.return&&_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}this._listeners.delete(type),this.debug&&console.debug("All listeners for the type "+type+" has been removed")}else console.warn("No listener saved for the type "+type)}else console.warn("No listener saved")}},{key:"removeEventListenersByTypes",value:function(argument_0){var types=0<arguments.length&&void 0!==argument_0?argument_0:[];if(this._listeners.size){var _iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _iterator4=types[Symbol.iterator]();!(_iteratorNormalCompletion4=(type=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var type=type.value;this.removeEventListenersByType(type,!1)}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{!_iteratorNormalCompletion4&&_iterator4.return&&_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}this.debug&&console.debug("All listeners for the following types: "+JSON.stringify(types)+" has been removed")}else console.warn("No listener saved")}},{key:"removeEventListenersByTarget",value:function(target,argument_1){var _this=this;if(!(!(1<arguments.length&&void 0!==argument_1)||argument_1)||this._listeners.size){var _iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var _step5,_iterator5=this._listeners.keys()[Symbol.iterator]();!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=!0){!function(type){var details=_this.getListenerDetailsByType(type),updatedDetails=[];details.forEach(function(value){value.target===target?value.target.removeEventListener(type,value.listener,value.options):updatedDetails.push(value)}),updatedDetails.length&&_this._listeners.set(type,updatedDetails)}(_step5.value)}}catch(err){_didIteratorError5=!0,_iteratorError5=err}finally{try{!_iteratorNormalCompletion5&&_iterator5.return&&_iterator5.return()}finally{if(_didIteratorError5)throw _iteratorError5}}}else console.warn("No listener saved")}},{key:"removeEventListenersByTargets",value:function(argument_0){var targets=0<arguments.length&&void 0!==argument_0?argument_0:[];if(this._listeners.size){var _iteratorNormalCompletion6=!0,_didIteratorError6=!1,_iteratorError6=void 0;try{for(var _iterator6=targets[Symbol.iterator]();!(_iteratorNormalCompletion6=(target=_iterator6.next()).done);_iteratorNormalCompletion6=!0){var target=target.value;this.removeEventListenersByTarget(target,!1)}}catch(err){_didIteratorError6=!0,_iteratorError6=err}finally{try{!_iteratorNormalCompletion6&&_iterator6.return&&_iterator6.return()}finally{if(_didIteratorError6)throw _iteratorError6}}this.debug&&console.debug("All listeners for the following targets: "+JSON.stringify(targets)+" has been removed")}else console.warn("No listener saved")}},{key:"removeEventListenerById",value:function(id,argument_1){if(!(!(1<arguments.length&&void 0!==argument_1)||argument_1)||this._listeners.size){var _iteratorNormalCompletion7=!0,_didIteratorError7=!1,_iteratorError7=void 0;try{for(var _iterator7=this._listeners.entries()[Symbol.iterator]();!(_iteratorNormalCompletion7=(_ref3=_iterator7.next()).done);_iteratorNormalCompletion7=!0){var _ref3=_ref3.value,_ref3=_slicedToArray(_ref3,2),type=_ref3[0],listenersDetails=_ref3[1],_iteratorNormalCompletion8=!0,_didIteratorError8=!1,_iteratorError8=void 0;try{for(var _iterator8=listenersDetails.entries()[Symbol.iterator]();!(_iteratorNormalCompletion8=(index=_iterator8.next()).done);_iteratorNormalCompletion8=!0){var details=index.value,_updatedDetails=_slicedToArray(details,2),index=_updatedDetails[0],details=_updatedDetails[1];if(details._id===id){_updatedDetails=[].concat(_toConsumableArray(listenersDetails));return _updatedDetails.splice(index,1),this._listeners.set(type,_updatedDetails),details.target.removeEventListener(details.type,details.listener,details.options),this.debug&&console.debug("The associated listener for the id: "+id+" has been removed"),!0}}}catch(err){_didIteratorError8=!0,_iteratorError8=err}finally{try{!_iteratorNormalCompletion8&&_iterator8.return&&_iterator8.return()}finally{if(_didIteratorError8)throw _iteratorError8}}}}catch(err){_didIteratorError7=!0,_iteratorError7=err}finally{try{!_iteratorNormalCompletion7&&_iterator7.return&&_iterator7.return()}finally{if(_didIteratorError7)throw _iteratorError7}}return console.warn("No associated listener found for the id: "+id),!1}console.warn("No listener saved")}},{key:"removeEventListenersByIds",value:function(argument_0){var ids=0<arguments.length&&void 0!==argument_0?argument_0:[];if(this._listeners.size){var removedIds=[],_iteratorNormalCompletion9=!0,_didIteratorError9=!1,_iteratorError9=void 0;try{for(var _iterator9=ids[Symbol.iterator]();!(_iteratorNormalCompletion9=(id=_iterator9.next()).done);_iteratorNormalCompletion9=!0){var id=id.value;this.removeEventListenerById(id,!1)&&removedIds.push(id)}}catch(err){_didIteratorError9=!0,_iteratorError9=err}finally{try{!_iteratorNormalCompletion9&&_iterator9.return&&_iterator9.return()}finally{if(_didIteratorError9)throw _iteratorError9}}this.debug&&console.debug("All listeners for the following targets: "+JSON.stringify(removedIds)+" has been removed")}else console.warn("No listener saved")}}]),CustomEventRegisterManager}();exports.default=new CustomEventRegisterManager;